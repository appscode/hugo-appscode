{{ $productName := .Params.product_name }}
{{ $p := (index .Site.Data.products (default "appscode" $productName)) }}
{{ $currentBranch := (index (split .Params.menu_name "_") 2) }}

<header>
  {{ block "header-top" . }}
  <!-- new navbar area start .active-headroom  -->
  <div class="navbar-area header--fixed">

    <!-- iframe for top notification  -->
    <iframe src="/notification-top/" id="notification" frameborder="0" scrolling="no" style="width: 100%; display: flex; overflow: hidden; height: 38px;"></iframe>
    <script>
      window.addEventListener("message", receiveMessageFromIframe, false);

      function receiveMessageFromIframe(event) {
          // Check the origin of the message for security purposes
          let baseURL = "{{$.Site.BaseURL}}"

          if (baseURL.endsWith("/")) {
            baseURL = baseURL.slice(0, -1);
          }
           if (event.origin !== baseURL) {
              return;
          }
          const notification = document.querySelector("#notification");
          notification.style.height = `${event.data}px`
      }
    </script>
    <!-- iframe for top notification  -->
    <div class="navbar-area navbar-fixed">
      <div class="navbar-appscode-wrapper ">
        <!-- appscode navbar start  -->
        {{ $currentPageType := cond (le (len (split (trim .Page.RelPermalink "/") "/")) 2) "products" "docs" }}
        <div class="navbar-appscode{{ if eq $currentPageType "products" }} container {{ end }} height-60">

          <div class="navbar-left">
            <!-- brand logo  -->
            <div class="navbar-brand">
              <a href="{{.Site.Params.domain_appscode}}">
                <img src="{{$.Site.Data.products.appscode.logo.src}}"
                  alt="{{$.Site.Data.products.appscode.logo.alt}}" />
              </a>
              <a role="button" class="navbar-burger is-hidden-desktop" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>
            <!-- brand logo  -->
          </div>


          <div class="navbar-right">
            <div class="is-flex is-justify-content-space-between is-fullwidth">
              <!-- navbar items start -->
              <ul class="navbar-left-group">
                <li class="nav-item">
                  <button class="link">Products <i class="fa fa-angle-down" aria-hidden="true"></i></button>
                  <div class="mega-menu-wrapper">

                    <!-- ac-grid-container -->
                    <div class="mega-menu-inner container">
                      <button class="button ac-button inline-button back-button"><span
                          class="material-icons-outlined">arrow_back</span>Back</button>
                      <!-- product start  -->
                      <div class="product-menu">
                        {{ range $item := $.Site.Data.config.productMenu.c0 }}
                        {{ $p := (index $.Site.Data.products $item) }}
                        <!-- single product start  -->
                        <a class="single-product"
                          href="{{ index $.Site.Params $p.website.domainKey}}{{ $p.website.path }}">
                          <div class="product-logo">
                            <img src="{{ $p.icon.src }}" alt="{{ $p.icon.alt }}">
                          </div>
                          <div class="product-info">
                            <h6>{{ $p.name }}</h6>
                            <p>{{ $p.tagline | plainify }}</p>
                          </div>
                          <div class="navigate-icon">
                            <span class="material-icons">
                              arrow_forward
                            </span>
                          </div>
                        </a>
                        <!-- single product end -->
                        {{ end }}

                        {{ range $item := $.Site.Data.config.productMenu.c1 }}
                        {{ $p := (index $.Site.Data.products $item) }}
                        <!-- single product start  -->
                        <a class="single-product"
                          href="{{ index $.Site.Params $p.website.domainKey}}{{ $p.website.path }}">
                          <div class="product-logo">
                            <img src="{{ $p.icon.src }}" alt="{{ $p.icon.alt }}">
                          </div>
                          <div class="product-info">
                            <h6>{{ $p.name }}</h6>
                            <p>{{ $p.tagline | plainify }}</p>
                          </div>
                          <div class="navigate-icon">
                            <span class="material-icons">
                              arrow_forward
                            </span>
                          </div>
                        </a>
                        <!-- single product end -->
                        {{ end }}

                        {{ range $item := $.Site.Data.config.productMenu.c2 }}
                        {{ $p := (index $.Site.Data.products $item) }}
                        <!-- single product start  -->
                        <a class="single-product"
                          href="{{ index $.Site.Params $p.website.domainKey}}{{ $p.website.path }}">
                          <div class="product-logo">
                            <img src="{{ $p.icon.src }}" alt="{{ $p.icon.alt }}">
                          </div>
                          <div class="product-info">
                            <h6>{{ $p.name }}</h6>
                            <p>{{ $p.tagline | plainify }}</p>
                          </div>
                          <div class="navigate-icon">
                            <span class="material-icons">
                              arrow_forward
                            </span>
                          </div>
                        </a>
                        <!-- single product end -->
                        {{ end }}
                      </div>
                      <!-- product end -->

                      <!-- product description start  -->
                      {{ range $item := $.Site.Data.config.productMenu.c0 }}
                      {{ $p := (index $.Site.Data.products $item) }}
                      <!-- single product description start  -->
                      <div class="product-description">
                        <div class="brand">
                          <img src="{{ $p.logo.src }}" alt="{{ $p.logo.alt }}">
                        </div>

                        <p>{{ $p.summary | safeHTML }}</p>

                        {{ $showAllFeatures := "false" }}
                        <ul class="features">
                          {{ range $index, $item := $p.features }}
                          {{ if lt $index 8 }}
                          <li><span class="material-icons">task_alt</span>{{ $item.title }}</li>
                          {{ end }}
                          {{ end }}
                        </ul>
                        <!-- <a href="{{ index $.Site.Params $p.website.domainKey}}{{ $p.website.path }}"
                    class="button ac-button inline-button">Learn More <span
                      class="material-icons">arrow_forward</span></a> -->
                      </div>
                      <!-- single product description end  -->
                      {{ end }}

                      {{ range $item := $.Site.Data.config.productMenu.c1 }}
                      {{ $p := (index $.Site.Data.products $item) }}
                      <!-- single product description start  -->
                      <div class="product-description">
                        <div class="brand">
                          <img src="{{ $p.logo.src }}" alt="{{ $p.logo.alt }}">
                        </div>


                        <p>{{ $p.summary | safeHTML }}</p>

                        <ul class="features">
                          {{ range $index, $item := $p.features }}
                          {{ if lt $index 8 }}
                          <li><span class="material-icons">task_alt</span>{{ $item.title }}</li>
                          {{ end }}
                          {{ end }}
                        </ul>
                        <!-- <a href="{{ index $.Site.Params $p.website.domainKey}}{{ $p.website.path }}"
                    class="button ac-button inline-button">Learn More <span
                      class="material-icons">arrow_forward</span></a> -->
                      </div>
                      <!-- single product description end  -->
                      {{ end }}
                      <!-- product description end -->

                      {{ range $item := $.Site.Data.config.productMenu.c2 }}
                      {{ $p := (index $.Site.Data.products $item) }}
                      <!-- single product description start  -->
                      <div class="product-description">
                        <div class="brand">
                          <img src="{{ $p.logo.src }}" alt="{{ $p.logo.alt }}">
                        </div>


                        <p>{{ $p.summary | safeHTML }}</p>

                        <ul class="features">
                          {{ range $index, $item := $p.features }}
                          {{ if lt $index 8 }}
                          <li><span class="material-icons">task_alt</span>{{ $item.title }}</li>
                          {{ end }}
                          {{ end }}
                        </ul>
                        <!-- <a href="{{ index $.Site.Params $p.website.domainKey}}{{ $p.website.path }}"
                    class="button ac-button inline-button">Learn More <span
                      class="material-icons">arrow_forward</span></a> -->
                      </div>
                      <!-- single product description end  -->
                      {{ end }}
                      <!-- product description end -->
                    </div>
                  </div>
                  <script type="text/javascript">
                    const productDescriptions = document.querySelectorAll(".product-description");
                    const products = document.querySelectorAll(".single-product");

                    productDescriptions[0].classList.add("is-block");
                    products[0].classList.add('is-active');

                    products.forEach((product, index) => {
                      product.addEventListener("mouseover", function () {
                        const currentActiveProduct = document.querySelector(".product-description.is-block");
                        const currentActiveItem = document.querySelector(".single-product.is-active");

                        currentActiveProduct.classList.remove("is-block");
                        currentActiveItem.classList.remove('is-active');

                        productDescriptions[index].classList.add("is-block");
                        products[index].classList.add("is-active");
                      });
                    });
                  </script>
                </li>

                <li class="nav-item">
                  <button class="link">Resources <i class="fa fa-angle-down" aria-hidden="true"></i></button>
                  <div class="mega-menu-wrapper">
                    <!-- ac-grid-container -->
                    <div class="mega-menu-inner container">
                      <button class="button ac-button inline-button back-button"><span
                          class="material-icons-outlined">arrow_back</span>Back to Resources</button>
                      <!-- list menu items start  -->
                      <div class="resources-list">
                        <!-- single resources list  -->
                        <div class="list-items">
                          <h6>RESOURCES</h6>
                          <ul>
                            <!-- <li><a href="#" target="_blank">Forum</a></li> -->
                            <li><a href="{{.Site.Params.blog_url}}">Blog</a></li>
                            <li><a href="{{.Site.Params.docs_url}}">Docs</a></li>
                            <li><a
                                href="https://www.youtube.com/watch?v=4lkBt5UUEAQ&list=PLoiT1Gv2KR1hAtDDW7fHEi-s2y2H3DOgx"
                                target="_blank">Webinars</a></li>
                            <li><a href="{{.Site.Params.learn_url}}">Learn</a></li>
                            <li><a href="{{.Site.Params.youtube_url}}" target="_blank">Demos</a></li>
                            <!-- <li><a
                                href="https://www.youtube.com/watch?v=xSq0OdlVLRI&list=PLoiT1Gv2KR1gE-WK7dIQ5bsJ_RAVZnzP8"
                                target="_blank">Tutorials</a></li> -->
                            <!-- <li><a href="#" target="_blank">Community</a></li> -->
                          </ul>
                        </div>
                        <!-- single resources list  -->

                        <!-- single resources list  -->
                        <div class="list-items is-hidden">
                          <h6>RECENT NEWS/BLOG</h6>
                          {{- $pctx := . -}}
                          {{- if .IsHome -}}{{ $pctx = .Site }}{{- end -}}
                          {{- $pages := $pctx.RegularPages -}}


                          <div class="press-wrapper">
                            {{ range $idx, $p := $pages.ByDate.Reverse }}
                            {{ if lt $idx 2 }}
                            <!-- single press start  -->
                            <a class="single-press">
                              <div class="calender">
                                <span class="date">{{ $p.Date.Format "2" }}</span>
                                <span class="month">{{ $p.Date.Format "Jan" }}</span>
                              </div>

                              <div class="description">
                                <h6>{{ $p.Title }}</h6>
                                {{ range $author := $p.Params.authors }}
                                <a href="/authors/{{ $author | urlize }}"
                                  class="author"><span>by</span>{{ $author }}</a>
                                {{ end }}
                                <p class="is-ellipsis-2">{{ $p.Summary }}</p>
                              </div>
                            </a>
                            <!-- <a class="single-press">
                          <div class="description">
                            <h6><a href="{{ $p.RelPermalink }}">{{ $p.Title }}</a></h6>
                          </div>
                        </a> -->
                            <!-- single press end -->
                            {{ end }}
                            {{ end }}
                            <a href="#" class="button ac-button inline-button">See More <span
                                class="material-icons">arrow_forward</span></a>
                          </div>
                        </div>
                        <!-- single resources list  -->
                      </div>
                      <!-- list menu items end -->
                    </div>
                  </div>
                </li>
                <li class="nav-item">
                  <a href="/webinar" class="link">Webinar <span class="whats-new">New</span></a>
                </li>
              </ul>
              <!-- navbar items end -->
              <!-- if webinar exist script  -->
              <script type="text/javascript">
                (function () {
                  var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
                  xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                      if (xhr.status === 200) {
                        var result = JSON.parse(xhr.responseText);
                        if (result.schedules) {
                          let endDate = new Date(result.schedules[0]).getTime();
                          let startDate = new Date().getTime();
                          let timeRemaining = parseInt((endDate - startDate) / 1000);
                          if (timeRemaining >= 0) {
                            document.querySelector('.whats-new').classList.add('is-block')
                          }
                        }
                      }
                    }
                  } //
                  // console.log('GET', 'https://x.appscode.com/_/webinars/');
                  xhr.open('GET', 'https://x.appscode.com/_/webinars/');
                  xhr.send();
                }());
              </script>
              <!-- navbar items start -->
            <div class="navbar-right-group">
              <ul>
                <li class="nav-item">
                  <a href="https://support.appscode.com" class="link">Support</a>
                </li>
              </ul>
              <!-- navbar items end -->
              <div class="buttons">
                <iframe src="/embed/?color=00a651" frameborder="0" scrolling="no" style="height: 50px; margin-bottom: 4px; width: 185px;  overflow: hidden;"></iframe>
                <!-- <a id="ac-sign-in-button" href="https://accounts.appscode.com/user/login"
                class="button ac-button is-loading {{ if eq $currentPageType "docs" }} is-hidden {{ end }}"><span>SIGN IN</span></a> -->
                <a href="{{ $.Site.Params.domain_appscode }}/contact/"
                class="button ac-button is-primary {{ if eq $currentPageType "docs" }} is-hidden {{ end }}">
                <span class="icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.068.157 2.148.279 3.238.364.466.037.893.281 1.153.671L12 21l2.652-3.978c.26-.39.687-.634 1.153-.67 1.09-.086 2.17-.208 3.238-.365 1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z" />
                  </svg>
                </span>
                <span>CONTACT SALES</span>
              </a>
              </div>
            </div>

            </div>
            {{ $currentPageType := cond (le (len (split (trim .Page.RelPermalink "/") "/")) 2) "products" "docs" }}

          </div>
        </div>
        <!-- appscode navbar end -->
      </div>

      <!-- navbar product end -->

      <script type="text/javascript">
        const navbarRightAll = document.querySelectorAll(".navbar-right");
        const navbarBurgerAll = document.querySelectorAll(".navbar-burger");

        // Create event listeners for each navbar-burger button
        Array.from(navbarBurgerAll).forEach((el, idx) => {
          el.addEventListener("click", function () {

            // Remove visible class from previous selected navbar right
            Array.from(navbarRightAll).forEach((rightEl, rightElIdx) => {
              if (idx !== rightElIdx && navbarRightAll[rightElIdx].classList.contains("is-visible")) {
                navbarRightAll[rightElIdx].classList.remove("is-visible");
                navbarBurgerAll[rightElIdx].classList.remove("is-active");
              }
            });

            const modalBackdropElement = document.querySelector(".modal-backdrop");

            // if modal backdrop element is visible then hide it
            if (modalBackdropElement && modalBackdropElement.classList.contains("is-show")) {
              modalBackdropElement.classList.remove("is-show")
            }

            // if any nav element is visible then hide it
            const activeNavItem = document.querySelector(".nav-item.is-active");
            if (activeNavItem && activeNavItem.classList.contains("is-active")) {
              activeNavItem.classList.remove("is-active");
            }

            navbarRightAll[idx].classList.toggle("is-visible");
          });
        })
      </script>
    </div>
  <!-- new navbar area end -->
  {{ end }}


  <!-- navabar product start  -->
  {{ block "header-bottom" . }}
  {{ $productName := .Params.product_name }}
  {{ if $productName }}
  {{ $p := (index $.Site.Data.products $productName) }}
  <div class="navbar-appscode-wrapper navbar-product mt-61">
    <!-- product navbar start  -->
    {{ $currentPageType := cond (le (len (split (trim .Page.RelPermalink "/") "/")) 2) "products" "docs" }}
    <div class="navbar-appscode{{ if eq $currentPageType "docs" }} bb-1 {{ else }}
        container{{ end }}">

      <!-- navbar left start  -->
      <div class="navbar-left">
        <div class="navbar-brand">
          <a href="{{ index $.Site.Params $p.website.domainKey }}{{ $p.website.path }}"><img src="{{ $p.logo.src }}"
              alt="{{ $p.logo.alt }}" alt="{{ $p.logo.alt }}"></a>

          {{ if eq $currentPageType "docs" }}
          <!-- version select start  -->
          {{ $currentBranch := (index (split .Params.menu_name "_") 2) }}

          <div class="product-version ml-20">
            <div class="dropdown">
              <div class="dropdown-trigger">
                <button class="button is-justify-content-space-between" aria-haspopup="true"
                  aria-controls="dropdown-menu3">


                  {{ range $v := $p.versions }}
                  {{ if $v.show }}
                  {{ if and $v.hostDocs (eq $v.version $currentBranch) }}
                  <span>{{ $v.version }}</span>
                  {{ if eq $v.version $p.latestVersion }}
                  <span class="new-item">Latest</span>
                  {{ end }}
                  {{ end }}
                  {{ end }}
                  {{ end }}
                  <span class="arrow">
                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                  </span>
                </button>
              </div>
              <div class="dropdown-menu" id="dropdown-menu3" role="menu">
                <div class="dropdown-content">
                  {{ range $v := $p.versions }}
                  {{ if $v.show }}
                  {{ if $v.hostDocs }}
                  <a href="/products/{{$p.key}}/{{ $v.version }}/" class="dropdown-item">{{ $v.version }}
                    {{ if eq $v.version $p.latestVersion }} <div class="new-item ml-15">Latest</div> {{ end }}</a>
                  {{ else }}
                  <a href="https://github.com/{{ $p.docRepo }}/tree/{{ $v.version }}/docs" target="_blank"
                    class="dropdown-item">{{ $v.version }}</a>
                  {{ end }}
                  {{ end }}
                  {{ end }}
                </div>
              </div>
            </div>
          </div>
          <!-- version select end -->
          {{ end }}

          <a role="button" class="navbar-burger width-65 font-size-14 has-text-weight-bold pl-6 pr-6"
            aria-label="menu" aria-expanded="false">
            MENU <i class="fa fa-angle-down pl-5"></i>
          </a>
        </div>
      </div>
      <!-- navbar left end -->
      <!-- navbar right start  -->
      <div class="navbar-right">
        <ul>
          {{ range (index .Site.Menus (printf "product_%s" $productName)) }}
          {{ if .HasChildren }}
          <li class="nav-item">
            <button href="#" class="link">{{ .Name }} <i class="fa fa-angle-down"></i></button>

            <!-- mega-menu wrapper -->
            <div class="mega-menu-wrapper">

              <!-- ac-grid-container -->
              <div class="mega-menu-inner container">
                <button class="button ac-button inline-button back-button"><span
                    class="material-icons-outlined">arrow_back</span>Back</button>
                <!-- product start  -->
                <div class="product-menu database-list">
                  {{ range .Children }}
                  {{ if eq .Parent $.Site.Params.main_menu_dropdown_item }}
                  <!-- single product start  -->
                  <a href="/kubernetes/databases/run-and-manage-{{ .Identifier }}-on-kubernetes
" class="single-product">
                    {{ if .Pre }}
                    <div class="product-logo">
                      <img src="{{ .Pre }}" alt="Menu Icon">
                    </div>
                    {{ end }}
                    <div class="product-info">
                      <h6>{{ .Name }}</h6>
                      <!-- <p>static content</p> -->
                    </div>
                    <div class="navigate-icon">
                      <span class="material-icons">
                        arrow_forward
                      </span>
                    </div>
                  </a>
                  <!-- single product end -->
                  {{ else }}
                  <a href="{{.URL}}" class="single-database">{{ .Name }}</a>
                  {{ end }}
                  {{ end }}

                </div>
                <!-- product end -->

                <!-- product description start  -->

                <!-- single product description start  -->
                <div class="product-description is-block">
                  <div class="video-content">
                    <div class="yt-thumbnail">
                      <a href="https://www.youtube.com/watch?v=hBHxMtSjKo4" class="play-icon yt-video">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                          stroke="#ffffff">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                      </a>
                      <img src="https://img.youtube.com/vi/hBHxMtSjKo4/sddefault.jpg" alt="">
                    </div>
                  </div>
                </div>
                <!-- single product description end  -->

                <!-- product description end -->
              </div>
            </div>
            <!-- mega-menu wrapper -->
          </li>
          {{else}}
          {{ if eq .Name "Documentation" }}
          <li class="nav-item">
            <a href="/products/{{ $productName }}/{{ $p.latestVersion }}/welcome/" class="link">{{ .Name }}</a>
          </li>
          {{ else }}
          <li class="nav-item">
            <a href="{{.URL}}" class="link">{{ .Name }}</a>
          </li>
          {{ end }}
          {{ end }}
          {{end}}
        </ul>

        <!-- Community link start  -->
        <div class="community-items ml-70">
          {{ if $p.socialLinks.github }}
          <a href="{{$p.socialLinks.github}}" class="community-item" target="_blank">
            <img src="/assets/images/icon/community/github-icon.svg" alt="github-icon">
          </a>
          {{ end }}
          {{ if $p.socialLinks.twitter }}
          <a href="{{$p.socialLinks.twitter}}" class="community-item" target="_blank">
            <img src="/assets/images/icon/community/twitter-icon.svg" alt="twitter-icon">
          </a>
          {{ end }}
          {{ if $p.socialLinks.slack }}
          <a href="{{$p.socialLinks.slack}}" class="community-item" target="_blank">
            <img src="https://cdn.appscode.com/assets/images/icon/community/slack-icon.svg" alt="slack-icon">
          </a>
          {{ end }}
        </div>
        <!-- Community link end -->
        <!-- action button start  -->
        {{ $currentPageType := cond (le (len (split (trim .Page.RelPermalink "/") "/")) 2) "products" "docs" }}
        {{ if eq $currentPageType "docs" }}
        <a href="/docs/{{ $p.latestVersion }}/setup/" class="button ac-button is-primary ml-8 height-40">TRY NOW
          FREE</a>
        {{ end }}
        <!-- action button end -->

      </div>
      <!-- navbar right end -->
    </div>
    <!-- product navbar end -->

     <!-- docs navbar start  -->
     {{ block "documentation-menu" . }}
     {{ end }}
     <!-- docs navbar end -->

  </div>
 {{ end }}
 {{ end }}



  <!-- navabar product end  -->
</div>

</header>