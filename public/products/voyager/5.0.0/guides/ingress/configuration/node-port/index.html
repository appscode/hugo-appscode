<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#2D9AED" />
    <title>KubeDB Home</title>
    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma-carousel.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma.min.css" />
    
    <link rel="stylesheet" href="/assets/css/style.css" />
    
    <link rel="stylesheet" href="/assets/css/responsive.css" />
  </head>

  <body>
    

    
    





<header>
  
  <div class="header-bottom-area header-area documentation-page" id="header">
    <div class="container section">
      <nav class="navbar">
        <div class="navbar-brand">
          <a class="navbar-item" href="./../index.html">
            <img src="/assets/images/logo-color-kube.png" alt="" />
          </a>

          <a
            role="button"
            class="navbar-burger burger"
            aria-label="menu"
            aria-expanded="false"
            data-target="acNav"
          >
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>

        <div id="acNav" class="navbar-menu main-menu">
          <div class="navbar-end">
            
            <div class="navbar-start">
              <a href="./../pricing/index.html" class="navbar-item">
                Commercial Support
              </a>

              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link">
                  Database
                </a>

                <div class="navbar-dropdown">
                  <a class="navbar-item">
                    Item-1
                  </a>
                  <a class="navbar-item">
                    Item-2
                  </a>
                  <a class="navbar-item">
                    Item-3
                  </a>
                  <hr class="navbar-divider" />
                  <a class="navbar-item">
                    Item-4
                  </a>
                </div>
              </div>

              <a href="../documentations/welcome.html" class="navbar-item">
                Documentation
              </a>
              <a class="navbar-item">
                v 0.110
              </a>
              <a class="navbar-item">
                Community
              </a>
            </div>
            
            <div class="navbar-item">
              <div class="buttons main-menu-button">
                <a class="button is-small">
                  <span><i class="fa fa-github" aria-hidden="true"></i></span
                  >Star
                </a>
                <div class="star-count">
                  565
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
    
    <div class="documentation-menu">
      <div class="container section">
        <div class="columns is-centered">
          <div class="column is-half has-text-centered">
            
            <div class="responsive-menu">
              <a
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="acNav3"
              >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>
            
            
            <nav class="documentation-navbar">
              <div id="acNav3" class="navbar-menu nav-menu main-menu">
                <div class="navbar-centered">
                  
                  <div class="navbar-start">
                    
                    
                      
                        
                          <a href="/products/voyager/5.0.0/" class=" navbar-item">Welcome</a>
                        
                      
                        
                          <a href="/products/voyager/5.0.0/concepts/" class=" navbar-item">Concepts</a>
                        
                      
                        
                          <a href="/products/voyager/5.0.0/setup/" class=" navbar-item">Setup</a>
                        
                      
                        
                          <div class="navbar-item has-dropdown is-hoverable">
                            <a class="navbar-link">
                              Guides
                            </a>
                            <div class="navbar-dropdown">
                              
                                
                                  <a href="/products/voyager/5.0.0/guides/certificate/" class="navbar-item">Certificate</a>
                                
                              
                                
                                  <a href="/products/voyager/5.0.0/guides/ingress/" class="navbar-item">Ingress</a>
                                
                              
                            </div>
                          </div>
                        
                      
                        
                          <a href="/products/voyager/5.0.0/reference/" class=" navbar-item">Reference</a>
                        
                      
                    
                  </div>
                  
                </div>
              </div>
            </nav>
            
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
</header>


    

    
    









<div class="documentation-area">
  <div class="container section">
    <div class="columns">
      <div class="column is-3">
        
        <div class="kd-left-sidebar">
          
          
          <div class="kd-version">
            
            <div class="control has-icons-left">
              <div class="select">
                
                
                <select>
                  
                    
                    
                      
                        <option>master</option>
                      
                    
                  
                    
                    
                      
                        <option >10.0.0</option>
                      
                    
                  
                    
                    
                      
                        <option >9.0.0</option>
                      
                    
                  
                    
                    
                      
                        <option >8.0.1</option>
                      
                    
                  
                    
                    
                  
                    
                    
                      
                        <option >7.4.0</option>
                      
                    
                  
                    
                    
                      
                        <option >7.3.0</option>
                      
                    
                  
                    
                    
                      
                        <option >7.2.0</option>
                      
                    
                  
                    
                    
                      
                        <option >7.1.1</option>
                      
                    
                  
                    
                    
                  
                    
                    
                      
                        <option >7.0.0</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                      
                        <option >6.0.0</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                      
                        <option >5.0.0</option>
                      
                    
                  
                    
                    
                  
                    
                    
                      
                        <option>3.2.2</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                </select>
              </div>
              <span class="icon is-left">
                <i class="fa fa-globe"></i>
              </span>
            </div>
          </div>
          

          
            
            
              
            
              
            
              
            
              
                
                  

                  
                  
                    
                  
                    

                      

                    
                  
                
              
            
              
            
          

          
          <div class="kd-sidebar-menu">
            
              

              
              

                
              

                
              

                
              

                
                  

                  
                  

                    
                      
                        
                      

                    
                    
                  

                    
                      
                        

                            
                              
                                




  



<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-1" >
  <label for="18636990e28c77dd9f746b278ac41cc4-1"><a href="/products/voyager/5.0.0/guides/ingress/">Ingress</a></label>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-2" >
  <label for="18636990e28c77dd9f746b278ac41cc4-2"><a>HTTP</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/single-service/">Single Service</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/virtual-hosting/">Virtual Hosting</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/source-range/">Source Range</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/rewrite-rules/">Rewrite Support</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/cors/">CORS</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/custom-http-port/">Custom HTTP Port</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/external-svc/">External SVC</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/hsts/">HSTS</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/statefulset-pod/">Statefulset Pod</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/sticky-session/">Sticky Session</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/http/blue-green-deployment/">Blue Green Deployment</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-3" >
  <label for="18636990e28c77dd9f746b278ac41cc4-3"><a>TLS</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/tls/overview/">Overview</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/tls/aws-cert-manager/">AWS Cert Manager</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/tls/backend-tls/">Backend TLS</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-4" >
  <label for="18636990e28c77dd9f746b278ac41cc4-4"><a>TCP</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/tcp/overview/">Overview</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-5" checked>
  <label for="18636990e28c77dd9f746b278ac41cc4-5"><a>Configuration</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/configuration/backend-rule/">Backend Rule</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/configuration/frontend-rule/">Frontend Rule</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/configuration/annotations/">Annotations</a></li>
        
      
        
          <li class="is-active"><a href="/products/voyager/5.0.0/guides/ingress/configuration/node-port/">Specify NodePort</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/configuration/default-options/">HAProxy Options</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/configuration/default-timeouts/">Configure Timeouts</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/configuration/custom-templates/">Custom Templates</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-6" >
  <label for="18636990e28c77dd9f746b278ac41cc4-6"><a>Security</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/security/basic-auth/">Basic Auth</a></li>
        
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/security/tls-auth/">TLS Auth</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-7" >
  <label for="18636990e28c77dd9f746b278ac41cc4-7"><a>Monitoring</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/products/voyager/5.0.0/guides/ingress/monitoring/stats/">Stats and Prometheus</a></li>
        
      
    </ul>
  </div>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-8" >
  <label for="18636990e28c77dd9f746b278ac41cc4-8"><a href="/products/voyager/5.0.0/guides/ingress/scaling/">Scaling Ingress</a></label>
</div>


                              
                            
                              
                                






<div class="item">
  <input type="checkbox" id="18636990e28c77dd9f746b278ac41cc4-9" >
  <label for="18636990e28c77dd9f746b278ac41cc4-9"><a href="/products/voyager/5.0.0/guides/ingress/pod-placement/">Pod Placement</a></label>
</div>


                              
                            

                        
                      

                    
                    
                  
                  

                
              

                
              
              
            
          </div>



































          
        </div>
        
      </div>
      <div class="column is-7">
        <div class="full-info">
          

<h1 id="specify-nodeport">Specify NodePort</h1>

<p>If you are using a <code>NodePort</code> or <code>LoadBalancer</code> type Ingress, a <code>NodePort</code> or <code>LoadBalancer</code> type Service is used to expose HAProxy pods respectively. If no node port is specified for each HAProxy Service port, Kubernetes will randomly assign one for you.</p>

<p>Since 3.2.0, you have the option to specify a NodePort for each HAProxy Service port. This allows you to guarantee that the port will not get changed, as you make changes to an Ingress object. If you specify nothing, Kubernetes will auto assign as before.</p>

<p>Below is an example Ingress that demonstrates this feature:</p>

<pre><code class="language-yaml">apiVersion: voyager.appscode.com/v1beta1
kind: Ingress
metadata:
  name: test-ingress
  namespace: default
  annotations:
    ingress.appscode.com/type: NodePort
spec:
  rules:
  - host: one.example.com
    http:
      port: '8989'
      nodePort: '32666'
      paths:
      - path: /t1
        backend:
          serviceName: test-service
          servicePort: '80'
      - path: /t2
        backend:
          serviceName: test-service
          servicePort: '80'
  - host: other.example.com
    http:
      port: '8989'
      nodePort: '32666'
      paths:
      - backend:
          serviceName: test-service
          servicePort: '80'
  - host: appscode.example.com
    tcp:
      port: '4343'
      nodePort: '32667'
      backend:
        serviceName: test-service
        servicePort: '80'
</code></pre>

<p>Since <code>ingress.appscode.com/type: NodePort</code> annotation is used, this Ingress is going to expose HAProxy pods via a <code>NodePort</code> Service. This service will listen to <code>8989</code> and <code>4343</code> port for incoming HTTP connections and these port will map to specified node ports, and will pass any request coming to it to the desired backend.</p>

<pre><code class="language-yaml">$ kubectl get svc voyager-test-ingress -o yaml

apiVersion: v1
kind: Service
metadata:
  annotations:
    ingress.appscode.com/origin-api-schema: voyager.appscode.com/v1beta1
    ingress.appscode.com/origin-name: test-ingress
  creationTimestamp: 2017-09-07T12:01:35Z
  name: voyager-test-ingress
  namespace: default
  resourceVersion: &quot;1161&quot;
  selfLink: /api/v1/namespaces/default/services/voyager-test-ingress
  uid: 4baf3dbf-93c4-11e7-bf12-080027a9d54f
spec:
  clusterIP: 10.0.0.41
  externalTrafficPolicy: Cluster
  ports:
  - name: tcp-8989
    nodePort: 32666
    port: 8989
    protocol: TCP
    targetPort: 8989
  - name: tcp-4343
    nodePort: 32667
    port: 4343
    protocol: TCP
    targetPort: 4343
  selector:
    origin: voyager
    origin-api-group: voyager.appscode.com
    origin-api-version: v1beta1
    origin-name: test-ingress
  sessionAffinity: None
  type: NodePort
status:
  loadBalancer: {}
</code></pre>

<p>Now, if you check the HAProxy configuration generated by Voyager, you should see something like below:</p>

<pre><code class="language-ini"># check the haproxy.cfg key in `data`
$ kubectl get configmap voyager-test-ingress -o yaml

# Generated HAProxy config snippet
frontend http-8989
	bind *:8989
	mode http
	option httplog
	option forwardfor

	acl host_acl_test-server.default:80-t3bu6y hdr(host) -i one.example.com:32666
	acl url_acl_test-server.default:80-t3bu6y path_beg /t1
	use_backend test-server.default:80-t3bu6y if host_acl_test-server.default:80-t3bu6y url_acl_test-server.default:80-t3bu6y

	acl host_acl_test-server.default:80-s46phe hdr(host) -i one.example.com:32666
	acl url_acl_test-server.default:80-s46phe path_beg /t2
	use_backend test-server.default:80-s46phe if host_acl_test-server.default:80-s46phe url_acl_test-server.default:80-s46phe

	acl host_acl_test-server.default:80-iv3d2y hdr(host) -i other.example.com:32666

	use_backend test-server.default:80-iv3d2y if host_acl_test-server.default:80-iv3d2y


backend test-server.default:80-t3bu6y
	server pod-172.17.0.5 172.17.0.5:8080

backend test-server.default:80-s46phe
	server pod-172.17.0.5 172.17.0.5:8080

backend test-server.default:80-iv3d2y
	server pod-172.17.0.5 172.17.0.5:8080

frontend tcp-4343
	bind *:4343
	mode tcp
	default_backend test-server.default:80-kfk4b2

backend test-server.default:80-kfk4b2
	mode tcp
	server pod-172.17.0.5 172.17.0.5:8080
</code></pre>

<p>Port 8989 has 2 separate hosts one.example.com and other.example.com . one.example.com has 2 paths <code>/t1</code> and <code>/t2</code>. Since they all are exposed via the same HTTP port, they must use the same NodePort.</p>

        </div>
      </div>
      <div class="column is-2">
        <div class="right-sidebar-area">
          
          <div class="search-area">
            <form action="#">
              <input type="text" placeholder="Search..." />
              <button class="search-button">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </form>
          </div>
          

          
          <div class="tbl-of-contents">
            <h4>What's on this Page</h4>
            <nav id="TableOfContents">
<ul>
<li><a href="#specify-nodeport">Specify NodePort</a></li>
</ul>
</nav>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>



    
    
<section></section>

    

    
    
<section></section>

    

    
    
    <section class="cta-area section-padding pt-0">
      <div class="container section">
        <div class="cta-padding">
          <div class="columns">
            <div class="column is-6">
              
              <div class="cta-text">
                <h2>Ready to get Start?</h2>
                <p>Create a Free Account and refer your friend</p>
              </div>
              
            </div>
            <div class="column is-6 has-text-right is-mobile">
              <div class="cta-button d-table">
                
                <div class="cta-button-inner d-table-cell">
                  <a href="#" class="button kd-button kd-primary"
                    >Try Now for FREE</a
                  >
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    

    
    
    <footer class="footer-area">
      <div class="footer-top">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <div class="single-footer-widget">
                
                <div class="footer-logo">
                  <a href="#"
                    ><img
                      src="/assets/images/logo-color-appscode.png"
                      alt=""
                      class="img"
                  /></a>
                </div>
                

                
                <div class="subscription-form">
                  <form action="#">
                    <label for="email">Subscribe Our Newsletter</label>
                    <div class="field has-addons">
                      <div class="control">
                        <input
                          class="input"
                          name="email"
                          id="email"
                          type="email"
                          placeholder="info@gmail.com"
                        />
                      </div>
                      <div class="control">
                        <a class="button kd-primary">
                          <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                        </a>
                      </div>
                    </div>
                  </form>
                </div>
                

                
                <div class="contact-information">
                  <h4>Have any Inquiry?</h4>
                  <ul class="all-contact-info">
                    <li>
                      <a href="callto:+123456789"
                        ><span
                          ><i class="fa fa-phone" aria-hidden="true"></i></span
                        >+123 456 789</a
                      >
                    </li>

                    <li>
                      <a href="mailto:appscode@gmail.com"
                        ><span
                          ><i
                            class="fa fa-envelope-o"
                            aria-hidden="true"
                          ></i></span
                        >appscode@gmail.com</a
                      >
                    </li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Products</h4>
                  <ul class="footer-link">
                    <li><a href="#">Voyager</a></li>
                    <li><a href="#">KubeDB</a></li>
                    <li><a href="#">Pharmer Stash </a></li>
                    <li><a href="#">Service Broker</a></li>
                    <li><a href="#">Kubed</a></li>
                    <li><a href="#">Guard</a></li>
                    <li><a href="#">Swift</a></li>
                    <li><a href="#">Searchlight</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Offerings</h4>
                  <ul class="footer-link">
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Open source </a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Company</h4>
                  <ul class="footer-link">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">blog</a></li>
                    <li><a href="#">Seles Inquiry</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Legal</h4>
                  <ul class="footer-link">
                    <li><a href="#">Service Level Agreement</a></li>
                    <li><a href="#">Security</a></li>
                    <li><a href="#">Learn More</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <p>All rights reserved © 2018. Appscode, Inc..</p>
            </div>
            <div class="column is-4 is-mobile has-text-centered">
              <div class="footer-inline-link">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
              </div>
            </div>
            <div class="column is-4 is-mobile has-text-right">
              <div class="socail-link-inline">
                <ul>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-facebook" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-github" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-youtube" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
    

    
    <script src="/assets/js/bulma-carousel.min.js"></script>
    
    <script src="/assets/js/main.js"></script>
  </body>
</html>
